<div class="register-container">
  <mat-card class="register-card">
    <mat-card-title>Registrarse</mat-card-title>
    <mat-card-content>
      <form [formGroup]="registerForm" (ngSubmit)="onRegister()">

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Nombres</mat-label>
          <input matInput type="text" formControlName="nombres" placeholder="Ej: Juan">
          <mat-error *ngIf="registerForm.get('nombres')?.hasError('required')">Campo obligatorio.</mat-error>
          <mat-error *ngIf="registerForm.get('nombres')?.hasError('minlength')">Debe tener al menos 3 caracteres.</mat-error>
          <mat-error *ngIf="registerForm.get('nombres')?.hasError('maxlength')">Máximo 30 caracteres.</mat-error>
          <mat-error *ngIf="registerForm.get('nombres')?.hasError('pattern')">Ingrese un nombre válido (sin espacios, números o símbolos).</mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Apellidos</mat-label>
          <input matInput type="text" formControlName="apellidos" placeholder="Ej: Pérez García">
          <mat-error *ngIf="registerForm.get('apellidos')?.hasError('required')">Campo obligatorio.</mat-error>
          <mat-error *ngIf="registerForm.get('apellidos')?.hasError('minlength')">Debe tener al menos 3 caracteres.</mat-error>
          <mat-error *ngIf="registerForm.get('apellidos')?.hasError('maxlength')">Máximo 30 caracteres.</mat-error>
          <mat-error *ngIf="registerForm.get('apellidos')?.hasError('pattern')">Ingrese un apellido válido (sin números o símbolos).</mat-error>
        </mat-form-field>

        <input type="hidden" formControlName="tipoDocumento">

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Número DNI</mat-label>
          <input matInput type="text" formControlName="numeroDocumento" placeholder="8 dígitos" maxlength="8">
          <mat-error *ngIf="registerForm.get('numeroDocumento')?.hasError('required')">Campo obligatorio.</mat-error>
          <mat-error *ngIf="registerForm.get('numeroDocumento')?.hasError('pattern')">El DNI solo debe contener números.</mat-error>
          <mat-error *ngIf="(registerForm.get('numeroDocumento')?.hasError('minlength') || registerForm.get('numeroDocumento')?.hasError('maxlength')) && registerForm.get('numeroDocumento')?.touched">
            Ingrese un numero de DNI valido.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Teléfono</mat-label>
          <input matInput type="text" formControlName="telefono" placeholder="9 dígitos" maxlength="9">
          <mat-error *ngIf="registerForm.get('telefono')?.hasError('required')">Campo obligatorio.</mat-error>
          <mat-error *ngIf="registerForm.get('telefono')?.hasError('pattern')">El teléfono solo debe contener números.</mat-error>
          <mat-error *ngIf="(registerForm.get('telefono')?.hasError('minlength') || registerForm.get('telefono')?.hasError('maxlength')) && registerForm.get('telefono')?.touched">
            Ingrese un numero valido.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Fecha de Nacimiento</mat-label>
          <input matInput type="date" formControlName="fechaNacimiento">
          <mat-hint *ngIf="isUnderage" style="color: orange;">
            Al ser menor de edad, no tendrás acceso a todo el contenido.
          </mat-hint>
          <mat-hint *ngIf="!isUnderage">&nbsp;</mat-hint>
          <mat-error *ngIf="registerForm.get('fechaNacimiento')?.hasError('required')">Campo obligatorio.</mat-error>
          <mat-error *ngIf="registerForm.get('fechaNacimiento')?.hasError('futureDate')">La fecha de nacimiento no puede ser una fecha futura.</mat-error>
          <mat-error *ngIf="registerForm.get('fechaNacimiento')?.hasError('maxAgeExceeded')">La edad no puede ser mayor a 90 años.</mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Email</mat-label>
          <input matInput type="email" formControlName="email" placeholder="Ej: tu.correo@dominio.com">
          <mat-error *ngIf="registerForm.get('email')?.hasError('required')">Campo obligatorio.</mat-error>
          <mat-error *ngIf="registerForm.get('email')?.hasError('maxlength')">El correo excede el límite de 50 caracteres.</mat-error>
          <mat-error *ngIf="registerForm.get('email')?.hasError('email')">Correo electrónico inválido.</mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Contraseña</mat-label>
          <input matInput type="password" formControlName="password">
          <mat-error *ngIf="registerForm.get('password')?.hasError('required')">Campo obligatorio.</mat-error>
          <mat-error *ngIf="registerForm.get('password')?.hasError('minlength')">La contraseña debe tener al menos 6 caracteres.</mat-error>
          <mat-error *ngIf="registerForm.get('password')?.hasError('maxlength')">La contraseña no debe exceder los 20 caracteres.</mat-error>
        </mat-form-field>

        <button mat-raised-button color="primary" type="submit" class="full-width">
          Registrarme
        </button>
      </form>

      <p class="login-link">¿Ya tienes cuenta? <a routerLink="/login">Inicia sesión aquí</a></p>

      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
      <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

    </mat-card-content>
  </mat-card>
</div>
